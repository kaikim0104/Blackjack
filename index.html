<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‹¬í”Œ ë¸”ë™ì­ (Simple Blackjack)</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #2E8B57; /* ì¹´ì§€ë…¸ ê·¸ë¦° */
            color: white;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
        }

        h1 { margin-bottom: 20px; text-shadow: 2px 2px 4px #000; }

        .game-area {
            background-color: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
        }

        .hand-area { margin: 20px 0; }
        
        .score { font-size: 1.2rem; font-weight: bold; margin-bottom: 10px; color: #FFD700; }

        .cards {
            display: flex;
            justify-content: center;
            gap: 10px;
            min-height: 100px;
        }

        .card {
            background-color: white;
            color: black;
            width: 60px;
            height: 90px;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 1.2rem;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
            position: relative;
        }

        .card.red { color: #d63031; }
        .card.black { color: #2d3436; }

        .card-back {
            background: repeating-linear-gradient(
                45deg,
                #606dbc,
                #606dbc 10px,
                #465298 10px,
                #465298 20px
            );
            color: transparent;
            border: 2px solid white;
        }

        .controls { margin-top: 20px; }

        button {
            padding: 10px 20px;
            font-size: 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 5px;
            transition: transform 0.1s;
            font-weight: bold;
        }

        button:active { transform: scale(0.95); }
        button:disabled { background-color: #ccc; cursor: not-allowed; }

        #btn-hit { background-color: #0984e3; color: white; }
        #btn-stand { background-color: #d63031; color: white; }
        #btn-new-game { background-color: #fdcb6e; color: black; display: none; }

        #message {
            margin-top: 20px;
            font-size: 1.5rem;
            font-weight: bold;
            min-height: 1.5rem;
            text-shadow: 1px 1px 2px black;
        }
    </style>
</head>
<body>

    <h1>â™ ï¸ ì‹¬í”Œ ë¸”ë™ì­ â™¦ï¸</h1>

    <div class="game-area">
        <div class="hand-area">
            <div class="score">ë”œëŸ¬ ì ìˆ˜: <span id="dealer-score">??</span></div>
            <div class="cards" id="dealer-cards"></div>
        </div>

        <hr style="opacity: 0.3;">

        <div class="hand-area">
            <div class="score">ë‚´ ì ìˆ˜: <span id="player-score">0</span></div>
            <div class="cards" id="player-cards"></div>
        </div>

        <div id="message"></div>

        <div class="controls">
            <button id="btn-hit" onclick="hit()">íˆíŠ¸ (Hit)</button>
            <button id="btn-stand" onclick="stand()">ìŠ¤íƒ ë“œ (Stand)</button>
            <button id="btn-new-game" onclick="startGame()">ìƒˆ ê²Œì„</button>
        </div>
    </div>

    <script>
        // ë³€ìˆ˜ ì„¤ì •
        const suits = ['â™ ', 'â™¥', 'â™¦', 'â™£'];
        const values = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
        let deck = [];
        let dealerHand = [];
        let playerHand = [];
        let gameOver = false;

        // HTML ìš”ì†Œ ì°¸ì¡°
        const dealerCardsEl = document.getElementById('dealer-cards');
        const playerCardsEl = document.getElementById('player-cards');
        const dealerScoreEl = document.getElementById('dealer-score');
        const playerScoreEl = document.getElementById('player-score');
        const messageEl = document.getElementById('message');
        const btnHit = document.getElementById('btn-hit');
        const btnStand = document.getElementById('btn-stand');
        const btnNewGame = document.getElementById('btn-new-game');

        // ê²Œì„ ì‹œì‘
        function startGame() {
            deck = createDeck();
            shuffleDeck(deck);
            dealerHand = [];
            playerHand = [];
            gameOver = false;
            
            messageEl.innerText = "";
            btnHit.disabled = false;
            btnStand.disabled = false;
            btnNewGame.style.display = "none";

            // ì´ˆê¸° ì¹´ë“œ ë¶„ë°° (í”Œë ˆì´ì–´ 2ì¥, ë”œëŸ¬ 2ì¥)
            playerHand.push(deck.pop());
            dealerHand.push(deck.pop());
            playerHand.push(deck.pop());
            dealerHand.push(deck.pop());

            updateUI();
            checkForBlackjack();
        }

        // ë± ìƒì„±
        function createDeck() {
            let newDeck = [];
            for (let suit of suits) {
                for (let value of values) {
                    let weight = parseInt(value);
                    if (value === 'J' || value === 'Q' || value === 'K') weight = 10;
                    if (value === 'A') weight = 11;
                    newDeck.push({ suit, value, weight });
                }
            }
            return newDeck;
        }

        // ë± ì„ê¸° (Fisher-Yates ì•Œê³ ë¦¬ì¦˜)
        function shuffleDeck(deck) {
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
        }

        // ì ìˆ˜ ê³„ì‚° (Ace ì²˜ë¦¬ í¬í•¨)
        function calculateScore(hand) {
            let score = 0;
            let aceCount = 0;

            for (let card of hand) {
                score += card.weight;
                if (card.value === 'A') aceCount++;
            }

            while (score > 21 && aceCount > 0) {
                score -= 10;
                aceCount--;
            }
            return score;
        }

        // UI ì—…ë°ì´íŠ¸
        function updateUI() {
            // í”Œë ˆì´ì–´ ì¹´ë“œ ë Œë”ë§
            playerCardsEl.innerHTML = '';
            playerHand.forEach(card => renderCard(card, playerCardsEl));
            playerScoreEl.innerText = calculateScore(playerHand);

            // ë”œëŸ¬ ì¹´ë“œ ë Œë”ë§
            dealerCardsEl.innerHTML = '';
            if (gameOver) {
                // ê²Œì„ ì¢…ë£Œ ì‹œ ëª¨ë“  ì¹´ë“œ ê³µê°œ
                dealerHand.forEach(card => renderCard(card, dealerCardsEl));
                dealerScoreEl.innerText = calculateScore(dealerHand);
            } else {
                // ê²Œì„ ì¤‘ì¼ ë•Œ ì²« ë²ˆì§¸ ì¹´ë“œëŠ” ë’·ë©´, ë‚˜ë¨¸ì§€ëŠ” ê³µê°œ
                const backCard = document.createElement('div');
                backCard.className = 'card card-back';
                dealerCardsEl.appendChild(backCard);
                
                // ë‘ ë²ˆì§¸ ì¹´ë“œë¶€í„° ë³´ì—¬ì¤Œ (ë°°ì—´ ì¸ë±ìŠ¤ 1ë¶€í„° ì‹œì‘)
                for(let i=1; i<dealerHand.length; i++) {
                    renderCard(dealerHand[i], dealerCardsEl);
                }
                dealerScoreEl.innerText = "?";
            }
        }

        // ê°œë³„ ì¹´ë“œ HTML ìƒì„± í•¨ìˆ˜
        function renderCard(card, container) {
            const cardEl = document.createElement('div');
            const isRed = card.suit === 'â™¥' || card.suit === 'â™¦';
            cardEl.className = `card ${isRed ? 'red' : 'black'}`;
            cardEl.innerHTML = `<div>${card.suit}</div><div>${card.value}</div>`;
            container.appendChild(cardEl);
        }

        // íˆíŠ¸ (ì¹´ë“œ ë°›ê¸°)
        function hit() {
            if (gameOver) return;
            playerHand.push(deck.pop());
            updateUI();

            if (calculateScore(playerHand) > 21) {
                endGame("ë²„ìŠ¤íŠ¸! íŒ¨ë°°í–ˆìŠµë‹ˆë‹¤. ğŸ˜­");
            }
        }

        // ìŠ¤íƒ ë“œ (ì°¨ë¡€ ë„˜ê¸°ê¸°)
        function stand() {
            if (gameOver) return;
            gameOver = true; // ë”œëŸ¬ í„´ì´ ì‹œì‘ë˜ë©´ í”Œë ˆì´ì–´ ì¡°ì‘ ë¶ˆê°€

            let dealerScore = calculateScore(dealerHand);
            // ë”œëŸ¬ëŠ” 17ì  ì´ìƒì´ ë  ë•Œê¹Œì§€ ì¹´ë“œë¥¼ ë°›ìŒ
            while (dealerScore < 17) {
                dealerHand.push(deck.pop());
                dealerScore = calculateScore(dealerHand);
            }
            updateUI();
            determineWinner();
        }

        // ìŠ¹íŒ¨ íŒì •
        function determineWinner() {
            const playerScore = calculateScore(playerHand);
            const dealerScore = calculateScore(dealerHand);

            if (dealerScore > 21) {
                messageEl.innerText = "ë”œëŸ¬ ë²„ìŠ¤íŠ¸! ìŠ¹ë¦¬í–ˆìŠµë‹ˆë‹¤! ğŸ‰";
                messageEl.style.color = "#76ff03";
            } else if (playerScore > dealerScore) {
                messageEl.innerText = "ìŠ¹ë¦¬í–ˆìŠµë‹ˆë‹¤! ğŸ‰";
                messageEl.style.color = "#76ff03";
            } else if (playerScore < dealerScore) {
                messageEl.innerText = "ë”œëŸ¬ ìŠ¹. íŒ¨ë°°í–ˆìŠµë‹ˆë‹¤. ğŸ˜¢";
                messageEl.style.color = "#ff5252";
            } else {
                messageEl.innerText = "ë¬´ìŠ¹ë¶€ì…ë‹ˆë‹¤ (Push).";
                messageEl.style.color = "white";
            }
            
            showNewGameButton();
        }

        // ì´ˆê¸° ë¸”ë™ì­ ì²´í¬
        function checkForBlackjack() {
            const playerScore = calculateScore(playerHand);
            if (playerScore === 21) {
                gameOver = true;
                updateUI();
                
                const dealerScore = calculateScore(dealerHand);
                if (dealerScore === 21) {
                    messageEl.innerText = "ë‘˜ ë‹¤ ë¸”ë™ì­! ë¬´ìŠ¹ë¶€!";
                } else {
                    messageEl.innerText = "ë¸”ë™ì­! ìŠ¹ë¦¬í–ˆìŠµë‹ˆë‹¤! ğŸ°";
                    messageEl.style.color = "#ffd700";
                }
                showNewGameButton();
            }
        }

        function endGame(msg) {
            gameOver = true;
            messageEl.innerText = msg;
            messageEl.style.color = "#ff5252";
            updateUI();
            showNewGameButton();
        }

        function showNewGameButton() {
            btnHit.disabled = true;
            btnStand.disabled = true;
            btnNewGame.style.display = "inline-block";
        }

        // ì•± ì‹œì‘
        startGame();

    </script>
</body>
</html>